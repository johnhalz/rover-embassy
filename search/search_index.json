{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Rover Embassy Control System","text":"<p>Welcome to the Rover Embassy Control System documentation! This is a modular, async rover control system built with Rust and Tokio, implementing a complete control architecture with 20+ modules communicating via channels.</p>"},{"location":"#overview","title":"Overview","text":"<p>Rover Embassy is a sophisticated control system designed for autonomous rovers. It implements a layered architecture that processes sensor data, plans missions, avoids obstacles, and executes behaviors while maintaining safety throughout the operation.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Modular Architecture: 20+ independent modules organized into logical layers</li> <li>Async/Await: Built on Tokio for efficient concurrent processing</li> <li>Channel-based Communication: Type-safe message passing between modules</li> <li>MCAP Logging: Structured logging compatible with Foxglove Studio</li> <li>Safety First: Multi-layer safety validation before hardware commands</li> <li>Graceful Shutdown: Clean termination with proper resource cleanup</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Build the project\ncargo build --release\n\n# Run the system\ncargo run --release\n\n# Press 'q' to shutdown gracefully\n</code></pre> <p>Important</p> <p>Always press 'q' to quit for proper MCAP file finalization and indexing. Do not use Ctrl+C or kill the process.</p>"},{"location":"#architecture-layers","title":"Architecture Layers","text":"<p>The system is organized into four main layers:</p> <ol> <li>Input Layer - Sensor data, user commands, and hardware status</li> <li>Core Processing - Environment understanding, planning, and state management</li> <li>Behavior &amp; Safety - Action execution and safety validation</li> <li>Output Layer - Hardware control and user feedback</li> </ol> <p>See the Architecture page for detailed information and visual diagrams.</p>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<ul> <li>Getting Started - Installation and first steps</li> <li>Architecture - System design and module interactions</li> <li>Modules Reference - Detailed documentation for each module</li> <li>MCAP Indexing - Understanding MCAP file structure and indexing</li> </ul>"},{"location":"#project-status","title":"Project Status","text":"<p>This is a working implementation with all core modules functional. The system includes:</p> <ul> <li>\u2705 All 20 modules implemented</li> <li>\u2705 Simulated sensor data generation</li> <li>\u2705 Command flow from user input to hardware</li> <li>\u2705 Bidirectional communication between modules</li> <li>\u2705 Safety checks and validation</li> <li>\u2705 System-wide logging to MCAP files</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>This project is designed to be extensible. Future enhancements could include:</p> <ul> <li>Real hardware integration</li> <li>Advanced path planning algorithms</li> <li>Machine learning for environment understanding</li> <li>Network-based remote control</li> <li>Configuration file support</li> </ul> <p>Version: 0.1.0</p>"},{"location":"MCAP_INDEXING/","title":"MCAP File Indexing Guide","text":""},{"location":"MCAP_INDEXING/#understanding-mcap-file-structure","title":"Understanding MCAP File Structure","text":"<p>According to the MCAP specification, a properly indexed MCAP file has this structure:</p> <pre><code>[Magic]\n[Header]\n[Data Section with Chunks]\n[Summary Section]       \u2190 Contains indices for fast lookup\n[Summary Offset Section] \u2190 Points to summary records\n[Footer]\n[Magic]\n</code></pre> <p>The Summary Section contains: - Schema records - Definitions of message types - Channel records - Topic and encoding information - Chunk Index records - Location and time range of each chunk - Statistics record - Message counts and time ranges - Summary Offset records - Pointers for fast random access</p> <p>Without these sections, Foxglove shows: \"This file is unindexed, unindexed files may have degraded performance\"</p>"},{"location":"MCAP_INDEXING/#why-files-become-unindexed","title":"Why Files Become Unindexed","text":"<p>The Summary and Index sections are only written when <code>writer.finish()</code> is called. This happens during graceful shutdown.</p>"},{"location":"MCAP_INDEXING/#properly-indexed-file-3-5-kb","title":"\u2705 Properly Indexed File (3-5 KB)","text":"<ul> <li>User presses 'q' to quit</li> <li>Shutdown signal propagates to all modules</li> <li>Logger receives shutdown signal</li> <li><code>writer.finish()</code> writes summary section</li> <li>File is complete with index</li> </ul>"},{"location":"MCAP_INDEXING/#unindexed-file-92-bytes","title":"\u274c Unindexed File (92 bytes)","text":"<ul> <li>Process killed with Ctrl+C or <code>kill</code> command</li> <li><code>writer.finish()</code> never called</li> <li>Only header and footer written</li> <li>No summary section, no indices</li> <li>Messages may be incomplete</li> </ul>"},{"location":"MCAP_INDEXING/#how-to-create-properly-indexed-files","title":"How to Create Properly Indexed Files","text":""},{"location":"MCAP_INDEXING/#method-1-press-q-to-quit-recommended","title":"Method 1: Press 'q' to Quit (Recommended)","text":"<pre><code>cargo run --release\n\n# Wait for logs to accumulate\n# Press 'q' when ready to quit\n\n# You should see:\n# [Logger] Finalizing MCAP file with N messages...\n# [Logger] MCAP file finalized successfully (indexed)\n</code></pre>"},{"location":"MCAP_INDEXING/#method-2-use-the-test-example","title":"Method 2: Use the Test Example","text":"<pre><code>cargo run --example test_mcap\n\n# This creates test_indexed.mcap which is guaranteed to be indexed\n# Open it in Foxglove to verify proper indexing works\n</code></pre>"},{"location":"MCAP_INDEXING/#verifying-your-mcap-file","title":"Verifying Your MCAP File","text":""},{"location":"MCAP_INDEXING/#file-size-check","title":"File Size Check","text":"<pre><code>ls -lh rover_logs_*.mcap\n\n# Good (indexed): 2-10 KB depending on number of messages\n# Bad (unindexed): 92 bytes\n</code></pre>"},{"location":"MCAP_INDEXING/#foxglove-check","title":"Foxglove Check","text":"<ol> <li>Open Foxglove Studio</li> <li>Load your <code>rover_logs_*.mcap</code> file</li> <li>Look for warnings at the top</li> </ol> <p>No warning = Properly indexed \u2705 \"This file is unindexed\" = finish() was not called \u274c</p>"},{"location":"MCAP_INDEXING/#technical-details","title":"Technical Details","text":""},{"location":"MCAP_INDEXING/#what-finish-does","title":"What finish() Does","text":"<p>When <code>writer.finish()</code> is called, the MCAP writer:</p> <ol> <li>Flushes any buffered data - Writes incomplete chunks</li> <li>Writes Data End record - Marks end of data section</li> <li>Writes Summary Section:</li> <li>Duplicates all Channel records</li> <li>Duplicates all Schema records</li> <li>Writes Chunk Index records (location and time range of each chunk)</li> <li>Writes Statistics record (message counts, time ranges)</li> <li>Writes Summary Offset Section - Pointers to summary record groups</li> <li>Writes Footer - Contains offsets to summary sections</li> <li>Finalizes the file - Closes the writer</li> </ol>"},{"location":"MCAP_INDEXING/#chunking-and-indexing","title":"Chunking and Indexing","text":"<p>The MCAP Writer (v0.24) automatically: - Batches messages into chunks (default ~1MB uncompressed) - Compresses chunks with Zstd - Creates message indices within each chunk - Writes chunk indices to the summary section</p> <p>This enables: - Fast random access - Jump to specific timestamps - Efficient compression - Better ratios with larger chunks - Topic filtering - Read only specific channels - Time-based queries - Find messages by log_time</p>"},{"location":"MCAP_INDEXING/#troubleshooting","title":"Troubleshooting","text":""},{"location":"MCAP_INDEXING/#q-i-pressed-q-but-still-see-unindexed","title":"Q: I pressed 'q' but still see \"unindexed\"","text":"<p>A: Check that you saw the finalization messages: <pre><code>[Logger] Finalizing MCAP file with N messages...\n[Logger] MCAP file finalized successfully (indexed)\n</code></pre> If you didn't see these, the logger may not have received the shutdown signal in time.</p>"},{"location":"MCAP_INDEXING/#q-can-i-use-ctrlc-to-quit","title":"Q: Can I use Ctrl+C to quit?","text":"<p>A: No! Ctrl+C sends SIGINT which terminates the process immediately. The Drop implementation might help in some cases, but it's not guaranteed. Always use 'q'.</p>"},{"location":"MCAP_INDEXING/#q-the-file-is-92-bytes-what-happened","title":"Q: The file is 92 bytes, what happened?","text":"<p>A: The process was terminated before <code>writer.finish()</code> could run. The file only contains the header and footer. No messages or indices were written.</p>"},{"location":"MCAP_INDEXING/#q-can-i-fix-an-unindexed-file","title":"Q: Can I fix an unindexed file?","text":"<p>A: No. Once the process terminates without calling finish(), the file cannot be repaired. You need to run the system again and quit with 'q'.</p>"},{"location":"MCAP_INDEXING/#q-does-the-drop-implementation-help","title":"Q: Does the Drop implementation help?","text":"<p>A: It helps for clean terminations (normal exit, panic), but not for signals like SIGKILL or forced termination. It's a safety net, not a guarantee.</p>"},{"location":"MCAP_INDEXING/#best-practices","title":"Best Practices","text":"<ol> <li>Always press 'q' to quit - Never use Ctrl+C or kill commands</li> <li>Wait for confirmation - Look for \"MCAP file finalized successfully\"</li> <li>Check file size - Indexed files are 3-10 KB minimum</li> <li>Test with example - Run <code>cargo run --example test_mcap</code> to verify indexing works</li> <li>Keep process running - Don't kill or interrupt during shutdown sequence</li> </ol>"},{"location":"MCAP_INDEXING/#related-documentation","title":"Related Documentation","text":"<ul> <li>MCAP Specification</li> <li>MCAP Summary Section</li> <li>Understanding MCAP Chunk Size and Compression</li> <li>Foxglove Studio</li> </ul>"},{"location":"architecture/","title":"System Architecture","text":"<p>The Rover Embassy Control System implements a sophisticated layered architecture with 20+ modules communicating via asynchronous channels. This page provides an overview of the system design and data flow.</p>"},{"location":"architecture/#architecture-diagram","title":"Architecture Diagram","text":"<p>The following diagram shows the complete system architecture and module interactions. This diagram is also available as <code>diagram.mermaid</code> in the docs folder.</p> <pre><code>graph TD\n\n    SA[Sensor Array] --&gt; IM[Input MGR]\n    DUI[Direct User Input] --&gt; IM\n    UI[User Instructions] --&gt; IM\n    HI[Hardware Interface] --&gt; IM\n    IM --&gt; L[Logger]\n    IM --&gt; EU[Environment Understanding]\n    IM --&gt; S[Stance]\n    IM --&gt; SM[State Manager]\n    IM --&gt; TMM[Task/Mission Manager]\n    SM --&gt; TMM\n    TMM --&gt; GP[Goal Planning]\n    EU --&gt; OA[Obstacle Avoidance]\n    MCS[Model/Calibration Storage] --&gt; EU\n    MCS --&gt; S\n    MCS --&gt; OA\n    OA &lt;--&gt; S\n    S &lt;--&gt; GP\n    GP &lt;--&gt; OA\n    OA --&gt; B[Behaviour]\n    S --&gt; B\n    GP --&gt; B\n    B --&gt; SC[Safety Controller]\n    SA --&gt; SC\n    SM --&gt; SC\n    SC --&gt; OM[Output Manager]\n    OM --&gt; UF[User Feedback]\n    OM --&gt; HI\n    OM --&gt; CM[Communication Module]\n    CM --&gt; UI\n    UF --&gt; CM\n    EU --&gt; L\n    S --&gt; L\n    SM --&gt; L\n    TMM --&gt; L\n    GP --&gt; L\n    OA --&gt; L\n    B --&gt; L\n    SC --&gt; L\n    OM --&gt; L</code></pre>"},{"location":"architecture/#layer-overview","title":"Layer Overview","text":"<p>The system is organized into four main layers, each with specific responsibilities:</p>"},{"location":"architecture/#1-input-layer-4-modules","title":"1. Input Layer (4 modules)","text":"<p>The input layer collects data from various sources:</p> Module Purpose Sensor Array Generates simulated sensor readings (distance, IMU, GPS, battery) Direct User Input Captures manual control commands from keyboard User Instructions Handles high-level mission commands Hardware Interface Manages hardware status and motor commands"},{"location":"architecture/#2-core-processing-9-modules","title":"2. Core Processing (9 modules)","text":"<p>The core processing layer performs perception, planning, and state management:</p> Module Purpose Input Manager Central hub aggregating all input sources Logger System-wide logging with multiple log levels Model/Calibration Storage Stores robot configuration and calibration data Environment Understanding Builds world model from sensor data State Manager Tracks robot's internal state Stance Manages robot posture and balance Task/Mission Manager Handles mission queue and task execution Goal Planning Plans high-level paths to achieve goals Obstacle Avoidance Real-time collision avoidance"},{"location":"architecture/#3-behavior-safety-2-modules","title":"3. Behavior &amp; Safety (2 modules)","text":"<p>This layer translates plans into actions and ensures safety:</p> Module Purpose Behaviour Translates high-level plans into executable actions Safety Controller Final safety validation before hardware commands"},{"location":"architecture/#4-output-layer-3-modules","title":"4. Output Layer (3 modules)","text":"<p>The output layer handles communication and hardware control:</p> Module Purpose Output Manager Routes commands to appropriate outputs User Feedback Displays status information Communication Module Handles bidirectional communication"},{"location":"architecture/#data-flow","title":"Data Flow","text":""},{"location":"architecture/#forward-flow-sensors-hardware","title":"Forward Flow (Sensors \u2192 Hardware)","text":"<pre><code>Sensors/User Input \n    \u2193\nInput Manager \n    \u2193\nProcessing Modules (Environment Understanding, State Manager, Planning)\n    \u2193\nBehavior Module\n    \u2193\nSafety Controller\n    \u2193\nOutput Manager\n    \u2193\nHardware Interface\n</code></pre>"},{"location":"architecture/#feedback-loops","title":"Feedback Loops","text":"<p>The system includes several important feedback loops:</p> <ol> <li>Stance \u2194 Obstacle Avoidance: Stance adjusts posture based on obstacles, obstacle avoidance considers current stance</li> <li>Goal Planning \u2194 Obstacle Avoidance: Goal planning requests obstacle-free paths, obstacle avoidance provides alternative routes</li> <li>Stance \u2194 Goal Planning: Goal planning considers stance capabilities, stance adjusts for planned goals</li> <li>Communication Module \u2192 User Instructions: Status updates can trigger new mission commands</li> </ol>"},{"location":"architecture/#logging-flow","title":"Logging Flow","text":"<p>All modules send log entries to the centralized Logger:</p> <pre><code>All Modules \u2192 Logger \u2192 MCAP File\n</code></pre>"},{"location":"architecture/#communication-patterns","title":"Communication Patterns","text":""},{"location":"architecture/#channel-types","title":"Channel Types","text":"<p>The system uses two main channel types:</p> <ul> <li><code>mpsc::channel</code>: Multi-producer, single-consumer channels for directed data flow</li> <li><code>broadcast::channel</code>: Broadcast channels for shutdown signals</li> </ul>"},{"location":"architecture/#message-passing","title":"Message Passing","text":"<ul> <li>Type-safe: All messages use strongly-typed data structures from <code>types.rs</code></li> <li>Async: Non-blocking message passing using Tokio's async channels</li> <li>Buffered: Channels have buffers (typically 32 messages) to handle bursts</li> </ul>"},{"location":"architecture/#bidirectional-communication","title":"Bidirectional Communication","text":"<p>Some modules require bidirectional communication:</p> <ul> <li>Stance \u2194 Obstacle Avoidance: Request/response pattern for stance queries</li> <li>Stance \u2194 Goal Planning: Request/response for goal feasibility checks</li> <li>Goal Planning \u2194 Obstacle Avoidance: Request/response for path planning</li> </ul>"},{"location":"architecture/#module-responsibilities","title":"Module Responsibilities","text":""},{"location":"architecture/#input-manager","title":"Input Manager","text":"<p>The Input Manager is the central hub for all input data:</p> <ul> <li>Receives sensor data, user commands, and hardware status</li> <li>Routes data to appropriate processing modules</li> <li>Ensures data consistency and timing</li> </ul>"},{"location":"architecture/#state-manager","title":"State Manager","text":"<p>Maintains the robot's internal state:</p> <ul> <li>Tracks current robot state (Idle, ManualControl, ExecutingMission, etc.)</li> <li>Provides state updates to other modules</li> <li>Manages state transitions</li> </ul>"},{"location":"architecture/#safety-controller","title":"Safety Controller","text":"<p>Final validation layer before hardware commands:</p> <ul> <li>Validates behavior commands against sensor data</li> <li>Checks robot state for safety</li> <li>Can override commands in emergency situations</li> <li>Only allows safe commands to reach hardware</li> </ul>"},{"location":"architecture/#logger","title":"Logger","text":"<p>Centralized logging infrastructure:</p> <ul> <li>Receives log entries from all modules</li> <li>Writes to MCAP file format</li> <li>Uses Foxglove Log schema with FlatBuffer encoding</li> <li>Ensures proper file indexing on shutdown</li> </ul>"},{"location":"architecture/#design-principles","title":"Design Principles","text":""},{"location":"architecture/#modularity","title":"Modularity","text":"<p>Each module is: - Independent: Can be developed and tested separately - Focused: Has a single, well-defined responsibility - Replaceable: Can be swapped with alternative implementations</p>"},{"location":"architecture/#safety","title":"Safety","text":"<p>Multiple safety layers: - Input validation: Data checked at entry points - State validation: Commands validated against current state - Safety controller: Final check before hardware - Emergency stop: System-wide emergency stop capability</p>"},{"location":"architecture/#extensibility","title":"Extensibility","text":"<p>The architecture supports: - New sensors: Add to Sensor Array or create new input modules - New behaviors: Extend Behavior module with new action types - New planning algorithms: Replace Goal Planning implementation - Hardware integration: Replace Hardware Interface with real hardware</p>"},{"location":"architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"architecture/#async-processing","title":"Async Processing","text":"<ul> <li>All modules run as independent Tokio tasks</li> <li>Non-blocking I/O throughout</li> <li>Efficient concurrent processing</li> </ul>"},{"location":"architecture/#channel-buffering","title":"Channel Buffering","text":"<ul> <li>Buffered channels prevent blocking</li> <li>Buffer sizes tuned for expected message rates</li> <li>Overflow handling prevents data loss</li> </ul>"},{"location":"architecture/#resource-management","title":"Resource Management","text":"<ul> <li>Graceful shutdown ensures proper cleanup</li> <li>MCAP file finalization on shutdown</li> <li>No resource leaks</li> </ul>"},{"location":"architecture/#future-enhancements","title":"Future Enhancements","text":"<p>Potential architectural improvements:</p> <ul> <li>Configuration system: File-based module configuration</li> <li>Plugin system: Dynamic module loading</li> <li>Network layer: Remote control and monitoring</li> <li>Distributed processing: Multi-node rover coordination</li> <li>Real-time constraints: Hard real-time guarantees for safety-critical modules</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you get up and running with the Rover Embassy Control System.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following installed:</p> <ul> <li>Rust (latest stable version) - Install Rust</li> <li>Cargo (comes with Rust)</li> <li>Git (for cloning the repository)</li> </ul>"},{"location":"getting-started/#installation","title":"Installation","text":""},{"location":"getting-started/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone &lt;repository-url&gt;\ncd rover-embassy\n</code></pre>"},{"location":"getting-started/#2-build-the-project","title":"2. Build the Project","text":"<pre><code># Debug build (faster compilation, slower runtime)\ncargo build\n\n# Release build (optimized, recommended for running)\ncargo build --release\n</code></pre>"},{"location":"getting-started/#3-run-the-system","title":"3. Run the System","text":"<pre><code># Run in release mode (recommended)\ncargo run --release\n</code></pre> <p>You should see output like:</p> <pre><code>Rover Embassy Control System\nVersion: 0.1.0\nInitializing all modules...\n\u2713 All 20 modules initialized and running!\n\u2192 Press 'q' to shutdown\n</code></pre>"},{"location":"getting-started/#first-run","title":"First Run","text":"<p>When you first run the system:</p> <ol> <li>All modules start - You'll see initialization messages from each module</li> <li>Sensor data flows - The system begins generating simulated sensor readings</li> <li>Logging begins - An MCAP file is created in the project root: <code>rover_logs_&lt;timestamp&gt;.mcap</code></li> <li>System is ready - The rover is ready to receive commands</li> </ol>"},{"location":"getting-started/#shutting-down","title":"Shutting Down","text":"<p>Critical: Always Use 'q' to Quit</p> <p>To create properly indexed MCAP files, you MUST press 'q' to quit. Do not use Ctrl+C or kill the process.</p> <p>When you press 'q': - The shutdown signal is sent to all modules - The logger finalizes the MCAP file with proper indexing - All modules clean up gracefully - You'll see: <code>\u2713 All modules stopped. Goodbye!</code></p>"},{"location":"getting-started/#viewing-logs","title":"Viewing Logs","text":"<p>The system logs all events to MCAP files that can be visualized in Foxglove Studio.</p>"},{"location":"getting-started/#1-download-foxglove-studio","title":"1. Download Foxglove Studio","text":"<p>Get the free, open-source Foxglove Studio for your platform.</p>"},{"location":"getting-started/#2-open-your-log-file","title":"2. Open Your Log File","text":"<ol> <li>Launch Foxglove Studio</li> <li>Click \"Open local file\"</li> <li>Select your <code>rover_logs_*.mcap</code> file from the project root</li> </ol>"},{"location":"getting-started/#3-explore-the-logs","title":"3. Explore the Logs","text":"<ul> <li>Log Panel: View structured log messages from all modules</li> <li>Raw Messages: See the JSON data structure</li> <li>Timeline: Scrub through logs to see system behavior over time</li> <li>Filtering: Filter by log level or module name</li> </ul>"},{"location":"getting-started/#testing","title":"Testing","text":""},{"location":"getting-started/#run-the-test-example","title":"Run the Test Example","text":"<p>To generate a test MCAP file that's guaranteed to be indexed:</p> <pre><code>cargo run --example test_mcap\n</code></pre> <p>This creates <code>test_indexed.mcap</code> which you can open in Foxglove to verify proper indexing.</p>"},{"location":"getting-started/#project-structure","title":"Project Structure","text":"<pre><code>rover-embassy/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs              # Entry point\n\u2502   \u251c\u2500\u2500 lib.rs               # System initialization\n\u2502   \u251c\u2500\u2500 types.rs             # Shared data structures\n\u2502   \u251c\u2500\u2500 input/               # Input layer modules\n\u2502   \u251c\u2500\u2500 perception/          # Perception modules\n\u2502   \u251c\u2500\u2500 planning/            # Planning modules\n\u2502   \u251c\u2500\u2500 control/             # Control modules\n\u2502   \u251c\u2500\u2500 output/              # Output layer modules\n\u2502   \u2514\u2500\u2500 infra/               # Infrastructure (logging)\n\u251c\u2500\u2500 docs/                    # Documentation\n\u251c\u2500\u2500 schemas/                 # FlatBuffer schemas\n\u2514\u2500\u2500 Cargo.toml              # Rust project configuration\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Architecture documentation to understand the system design</li> <li>Explore the Modules Reference for detailed module documentation</li> <li>Learn about MCAP Indexing for proper log file handling</li> </ul>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/#build-errors","title":"Build Errors","text":"<p>If you encounter build errors:</p> <pre><code># Update Rust toolchain\nrustup update\n\n# Clean and rebuild\ncargo clean\ncargo build --release\n</code></pre>"},{"location":"getting-started/#mcap-file-issues","title":"MCAP File Issues","text":"<p>If your MCAP file shows as \"unindexed\" in Foxglove:</p> <ul> <li>Make sure you pressed 'q' to quit (not Ctrl+C)</li> <li>Check that you see the \"MCAP file finalized successfully\" message</li> <li>Verify file size is &gt; 1KB (unindexed files are ~92 bytes)</li> <li>See MCAP Indexing for detailed troubleshooting</li> </ul>"},{"location":"getting-started/#module-not-starting","title":"Module Not Starting","text":"<p>If a module fails to start:</p> <ul> <li>Check the terminal output for error messages</li> <li>Ensure all dependencies are installed</li> <li>Verify you're using a recent Rust version</li> </ul>"},{"location":"getting-started/#getting-help","title":"Getting Help","text":"<ul> <li>Check the Architecture page for system design details</li> <li>Review the Modules Reference for module-specific information</li> <li>See MCAP Indexing for logging and file format details</li> </ul>"},{"location":"modules/","title":"Modules Reference","text":"<p>This page provides detailed documentation for each module in the Rover Embassy Control System.</p>"},{"location":"modules/#input-layer","title":"Input Layer","text":""},{"location":"modules/#sensor-array","title":"Sensor Array","text":"<p>Location: <code>src/input/sensor_array.rs</code></p> <p>Generates simulated sensor readings for the rover system.</p> <p>Inputs: None (generates data internally)</p> <p>Outputs: - <code>sensor_data_tx</code>: Sensor data to Input Manager - <code>sensor_data_safety_tx</code>: Sensor data to Safety Controller</p> <p>Data Generated: - Distance sensor readings (multiple sensors) - IMU data (acceleration, gyroscope, orientation) - GPS data (latitude, longitude, altitude) - Battery level</p> <p>Logging: Logs sensor readings at INFO level</p>"},{"location":"modules/#direct-user-input","title":"Direct User Input","text":"<p>Location: <code>src/input/direct_user_input.rs</code></p> <p>Captures manual control commands from keyboard input.</p> <p>Inputs: Keyboard events (via crossterm)</p> <p>Outputs: - <code>user_command_tx</code>: User commands to Input Manager</p> <p>Commands Supported: - <code>ManualControl::MoveForward(speed)</code> - <code>ManualControl::MoveBackward(speed)</code> - <code>ManualControl::TurnLeft(angular_velocity)</code> - <code>ManualControl::TurnRight(angular_velocity)</code> - <code>ManualControl::Stop</code></p> <p>Logging: Logs user commands at INFO level</p>"},{"location":"modules/#user-instructions","title":"User Instructions","text":"<p>Location: <code>src/input/user_instructions.rs</code></p> <p>Handles high-level mission commands and processes feedback from the Communication Module.</p> <p>Inputs: - <code>comm_user_rx</code>: Commands from Communication Module</p> <p>Outputs: - <code>user_command_tx</code>: Mission commands to Input Manager</p> <p>Mission Types: - <code>GoToWaypoint { lat, lon }</code> - <code>FollowPath(waypoints)</code> - <code>Patrol { waypoints, loops }</code> - <code>ReturnHome</code></p> <p>Logging: Logs mission commands at INFO level</p>"},{"location":"modules/#hardware-interface","title":"Hardware Interface","text":"<p>Location: <code>src/output/hardware_interface.rs</code></p> <p>Manages hardware status and executes motor commands. Currently simulates hardware behavior.</p> <p>Inputs: - <code>motor_command_hw_rx</code>: Motor commands from Output Manager</p> <p>Outputs: - <code>hw_status_tx</code>: Hardware status to Input Manager</p> <p>Status Information: - Battery voltage - Motor temperatures - Health status (Healthy, Warning, Critical)</p> <p>Logging: Logs hardware status and motor commands at INFO level</p>"},{"location":"modules/#core-processing-layer","title":"Core Processing Layer","text":""},{"location":"modules/#input-manager","title":"Input Manager","text":"<p>Location: <code>src/input/input_manager.rs</code></p> <p>Central hub that aggregates all input sources and routes data to appropriate processing modules.</p> <p>Inputs: - <code>sensor_data_rx</code>: Sensor data from Sensor Array - <code>user_command_rx</code>: Commands from Direct User Input and User Instructions - <code>hw_status_rx</code>: Hardware status from Hardware Interface</p> <p>Outputs: - <code>im_env_tx</code>: Sensor data to Environment Understanding - <code>im_state_sensor_tx</code>: Sensor data to State Manager - <code>im_state_cmd_tx</code>: Commands to State Manager - <code>im_task_tx</code>: Mission commands to Task/Mission Manager</p> <p>Responsibilities: - Aggregates inputs from multiple sources - Routes data to appropriate modules - Ensures data consistency</p> <p>Logging: Logs routing decisions at DEBUG level</p>"},{"location":"modules/#logger","title":"Logger","text":"<p>Location: <code>src/infra/logger.rs</code></p> <p>System-wide logging infrastructure that writes to MCAP files.</p> <p>Inputs: - <code>log_rx</code>: Log entries from all modules</p> <p>Outputs: MCAP file (written to disk)</p> <p>Features: - Writes to MCAP file format - Uses Foxglove Log schema with FlatBuffer encoding - Creates timestamped log files: <code>rover_logs_&lt;timestamp&gt;.mcap</code> - Properly indexes files on graceful shutdown</p> <p>Log Levels: - <code>DEBUG</code>: Detailed diagnostic information - <code>INFO</code>: General informational messages - <code>WARN</code>: Warning messages - <code>ERROR</code>: Error messages</p> <p>Logging: Logs file operations at INFO level</p> <p>MCAP File Finalization</p> <p>The logger must receive a shutdown signal to properly finalize the MCAP file. Always press 'q' to quit.</p>"},{"location":"modules/#modelcalibration-storage","title":"Model/Calibration Storage","text":"<p>Location: <code>src/perception/model_calibration_storage.rs</code></p> <p>Stores robot configuration and calibration data.</p> <p>Inputs: - <code>calib_req_rx</code>: Calibration requests</p> <p>Outputs: - <code>calib_resp_tx</code>: Calibration data responses</p> <p>Stored Data: - Wheel diameter and wheel base - Maximum speed and angular velocity - Sensor offsets</p> <p>Logging: Logs calibration requests at DEBUG level</p>"},{"location":"modules/#environment-understanding","title":"Environment Understanding","text":"<p>Location: <code>src/perception/environment_understanding.rs</code></p> <p>Builds a world model from sensor data, identifying obstacles and terrain.</p> <p>Inputs: - <code>env_rx</code>: Sensor data from Input Manager</p> <p>Outputs: - <code>env_state_tx</code>: Environment state to Obstacle Avoidance</p> <p>Capabilities: - Obstacle detection and classification - Terrain type identification - Confidence scoring</p> <p>Logging: Logs environment updates at INFO level</p>"},{"location":"modules/#state-manager","title":"State Manager","text":"<p>Location: <code>src/planning/state_manager.rs</code></p> <p>Tracks the robot's internal state and manages state transitions.</p> <p>Inputs: - <code>state_sensor_rx</code>: Sensor data from Input Manager - <code>state_cmd_rx</code>: Commands from Input Manager</p> <p>Outputs: - <code>state_tx</code>: State updates (currently unused) - <code>state_safety_tx</code>: State to Safety Controller - <code>state_task_tx</code>: State to Task/Mission Manager</p> <p>States: - <code>Idle</code>: No active mission - <code>ManualControl</code>: Manual control mode - <code>ExecutingMission</code>: Mission in progress - <code>Paused</code>: System paused - <code>EmergencyStop</code>: Emergency stop activated - <code>Error(String)</code>: Error state</p> <p>Logging: Logs state transitions at INFO level</p>"},{"location":"modules/#stance","title":"Stance","text":"<p>Location: <code>src/perception/stance.rs</code></p> <p>Manages robot posture and balance, adjusting stance based on terrain and obstacles.</p> <p>Inputs: - <code>stance_obstacle_req_rx</code>: Stance queries from Obstacle Avoidance - <code>stance_goal_req_rx</code>: Stance queries from Goal Planning</p> <p>Outputs: - <code>stance_obstacle_resp_tx</code>: Stance responses to Obstacle Avoidance - <code>stance_goal_resp_tx</code>: Stance responses to Goal Planning - <code>stance_behavior_tx</code>: Stance configuration to Behavior</p> <p>Stance Types: - <code>Normal</code>: Standard operating stance - <code>LowProfile</code>: Lowered for obstacles - <code>HighClearance</code>: Raised for rough terrain - <code>TiltCompensation(angle)</code>: Compensates for tilt</p> <p>Logging: Logs stance changes at INFO level</p>"},{"location":"modules/#taskmission-manager","title":"Task/Mission Manager","text":"<p>Location: <code>src/planning/task_mission_manager.rs</code></p> <p>Handles mission queue and task execution.</p> <p>Inputs: - <code>task_cmd_rx</code>: Mission commands from Input Manager - <code>state_task_rx</code>: State updates from State Manager</p> <p>Outputs: - <code>goal_tx</code>: Goals to Goal Planning</p> <p>Capabilities: - Mission queue management - Task execution tracking - Priority handling</p> <p>Logging: Logs mission and task updates at INFO level</p>"},{"location":"modules/#goal-planning","title":"Goal Planning","text":"<p>Location: <code>src/planning/goal_planning.rs</code></p> <p>Plans high-level paths to achieve goals.</p> <p>Inputs: - <code>goal_rx</code>: Goals from Task/Mission Manager - <code>stance_goal_resp_rx</code>: Stance responses from Stance - <code>obstacle_goal_resp_rx</code>: Obstacle responses from Obstacle Avoidance</p> <p>Outputs: - <code>stance_goal_req_tx</code>: Stance queries to Stance - <code>goal_obstacle_req_tx</code>: Path queries to Obstacle Avoidance - <code>behavior_path_goal_tx</code>: Planned paths to Behavior</p> <p>Planning Features: - Path generation - Waypoint planning - Trajectory optimization</p> <p>Logging: Logs planning decisions at INFO level</p>"},{"location":"modules/#obstacle-avoidance","title":"Obstacle Avoidance","text":"<p>Location: <code>src/perception/obstacle_avoidance.rs</code></p> <p>Real-time collision avoidance system.</p> <p>Inputs: - <code>env_state_rx</code>: Environment state from Environment Understanding - <code>stance_obstacle_resp_rx</code>: Stance responses from Stance - <code>goal_obstacle_req_rx</code>: Path queries from Goal Planning</p> <p>Outputs: - <code>stance_obstacle_req_tx</code>: Stance queries to Stance - <code>obstacle_goal_resp_tx</code>: Path responses to Goal Planning - <code>behavior_path_obstacle_tx</code>: Avoidance paths to Behavior</p> <p>Capabilities: - Real-time obstacle detection - Path adjustment - Collision prevention</p> <p>Logging: Logs obstacle avoidance actions at INFO level</p>"},{"location":"modules/#behavior-safety-layer","title":"Behavior &amp; Safety Layer","text":""},{"location":"modules/#behaviour","title":"Behaviour","text":"<p>Location: <code>src/control/behaviour.rs</code></p> <p>Translates high-level plans into executable actions.</p> <p>Inputs: - <code>behavior_path_goal_rx</code>: Planned paths from Goal Planning - <code>behavior_path_obstacle_rx</code>: Avoidance paths from Obstacle Avoidance - <code>stance_behavior_rx</code>: Stance configuration from Stance</p> <p>Outputs: - <code>behavior_tx</code>: Behavior commands to Safety Controller</p> <p>Behaviors: - <code>Idle</code>: No action - <code>MoveTowards { target, speed }</code>: Move toward target - <code>AvoidObstacle { direction }</code>: Avoid obstacle in direction - <code>AdjustStance(config)</code>: Adjust robot stance - <code>EmergencyStop</code>: Emergency stop</p> <p>Logging: Logs behavior commands at INFO level</p>"},{"location":"modules/#safety-controller","title":"Safety Controller","text":"<p>Location: <code>src/control/safety_controller.rs</code></p> <p>Final safety validation layer before hardware commands.</p> <p>Inputs: - <code>behavior_rx</code>: Behavior commands from Behaviour - <code>sensor_data_safety_rx</code>: Sensor data from Sensor Array - <code>state_safety_rx</code>: State from State Manager</p> <p>Outputs: - <code>motor_command_tx</code>: Validated motor commands to Output Manager</p> <p>Safety Checks: - Validates behavior commands against sensor data - Checks robot state for safety - Can override commands in emergency situations - Validates motor command ranges</p> <p>Logging: Logs safety checks and overrides at WARN/ERROR level</p>"},{"location":"modules/#output-layer","title":"Output Layer","text":""},{"location":"modules/#output-manager","title":"Output Manager","text":"<p>Location: <code>src/output/output_manager.rs</code></p> <p>Routes commands to appropriate outputs.</p> <p>Inputs: - <code>motor_command_rx</code>: Motor commands from Safety Controller</p> <p>Outputs: - <code>motor_command_hw_tx</code>: Motor commands to Hardware Interface - <code>status_feedback_tx</code>: Status to User Feedback - <code>status_comm_tx</code>: Status to Communication Module</p> <p>Responsibilities: - Routes motor commands to hardware - Distributes status updates - Manages output priorities</p> <p>Logging: Logs routing decisions at DEBUG level</p>"},{"location":"modules/#user-feedback","title":"User Feedback","text":"<p>Location: <code>src/output/user_feedback.rs</code></p> <p>Displays status information to the user.</p> <p>Inputs: - <code>status_feedback_rx</code>: Status updates from Output Manager</p> <p>Outputs: - <code>user_feedback_tx</code>: Feedback messages to Communication Module</p> <p>Feedback Types: - <code>Status</code>: General status updates - <code>Warning</code>: Warning messages - <code>Error</code>: Error messages - <code>Success</code>: Success confirmations</p> <p>Logging: Logs feedback generation at INFO level</p>"},{"location":"modules/#communication-module","title":"Communication Module","text":"<p>Location: <code>src/output/communication_module.rs</code></p> <p>Handles bidirectional communication with external systems.</p> <p>Inputs: - <code>status_comm_rx</code>: Status updates from Output Manager - <code>user_feedback_rx</code>: Feedback from User Feedback</p> <p>Outputs: - <code>comm_user_tx</code>: Commands to User Instructions</p> <p>Capabilities: - Status reporting - Command reception - Bidirectional communication</p> <p>Logging: Logs communication events at INFO level</p>"},{"location":"modules/#module-communication-summary","title":"Module Communication Summary","text":"Module Input Channels Output Channels Bidirectional Sensor Array 0 2 No Direct User Input 0 1 No User Instructions 1 1 No Hardware Interface 1 1 No Input Manager 3 4 No Logger 1 0 No Model/Calibration Storage 1 1 No Environment Understanding 1 1 No State Manager 2 3 No Stance 2 3 Yes (request/response) Task/Mission Manager 2 1 No Goal Planning 3 3 Yes (request/response) Obstacle Avoidance 3 3 Yes (request/response) Behaviour 3 1 No Safety Controller 3 1 No Output Manager 1 3 No User Feedback 1 1 No Communication Module 2 1 No"}]}